<h3>List of customers </h3>
<p>Show data using webix ui</p>
<div id='grid-container'></div>
{{!-- Chen script webix // data table --}}
<script>

webix.i18n.parseFormat = "%c";
webix.i18n.setLocale();

var grid = {
    view: 'datatable', id:'tb_customer', select: 'row',
    autoheight: true, scroll: true,
    //editable: 'cell',
    columns: [
        {id:'name', header:'Name', editor: 'text', sort:'text'},
        {id:'email', header:'Email', editor:'text',sort:'text',fillspace: true},
        {id:'phone', header:'Phone',sort:'text'},
        {id: 'status', header:'Status'}
    ],
    url: '/customers/data'
}

var data =  new webix.DataCollection({
    data:[
        { id:1, value:"Gold" },
        { id:2, value:"Silver" },
        { id:3, value:'Platinum'},
        { id:4, value: 'Copper'}
    ]
})

var form = {
    view: 'form', id:'form-customer',
    autoheight: true, 
    elements: [
        {view:'text', label:'Name', name:'name'},
        {view: 'text',label:'Email', name:'email'},
        {view: 'text',label:'Phone', name:'phone'},
        {
            view:"richselect",name:'status', label:"Status", options:[

            ]
        },
        {
            cols: [
                {view: 'button', value: 'Add', css:'button_success', click: add},
                {view: 'button', value: 'Update', css: "webix_primary"},
                {view: 'button', value: 'Unselect', css: '', onclick: unSelect},
                {view: 'button', value: 'Delete', css: 'webix_danger'}
                
            ]
        }
    ],

}

webix.ui({
    autowidth: true , type:'space',
    container : 'grid-container',
    cols :[
        grid, { view:"resizer" }, form
    ]
})
//$$('form-customer').bind($$('tb_customer'))
$$("tb_customer").attachEvent("onAfterSelect", function(id){
    $$("form-customer").setValues( $$("tb_customer").getItem(id) );
});
$$("form-customer").elements.status.getPopup().getList().sync(data);

function add() {
    data = this.getFormView().getValues();
    console.log(data)
}

function unSelect(id) {
    $$('tb_customer').unselect(id);
}
</script>